{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const getImagesByQuery = async (query, page) => {\n  const API_KEY = '54567653-327de5fba17dc16d91ee3d6a6';\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    throw error; \n  }\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(img => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n        </a>\n        <ul class=\"info\">\n          <li class=\"info-item\"><b>Likes</b> <span>${img.likes}</span></li>\n          <li class=\"info-item\"><b>Views</b> <span>${img.views}</span></li>\n          <li class=\"info-item\"><b>Comments</b> <span>${img.comments}</span></li>\n          <li class=\"info-item\"><b>Downloads</b> <span>${img.downloads}</span></li>\n        </ul>\n      </li>`)\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) loader.classList.add('is-hidden');\n}\n\n\nexport function showLoadMoreButton() {\n  const button = document.querySelector('.load-more');\n  if (button) button.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  const button = document.querySelector('.load-more');\n  if (button) button.classList.add('is-hidden');\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  if (gallery) gallery.innerHTML = '';\n}","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = event.currentTarget.elements['search-text'].value.trim();\n\n  if (!query) {\n    iziToast.warning({ message: 'Please enter a search query' });\n    return;\n  }\n\n  page = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  \n  await handleFetch();\n  event.target.reset(); \n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  hideLoadMoreButton();\n  await handleFetch();\n});\n\nasync function handleFetch() {\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    createGallery(data.hits);\n\n    if (page * 15 < totalHits) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      \n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight'\n      });\n    }\n\n    if (page > 1) {\n      const card = document.querySelector('.gallery-item');\n      if (card) {\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n    }\n\n  } catch (error) {\n    iziToast.error({ message: 'Error fetching data. Try again!' });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n}"],"names":["getImagesByQuery","query","page","API_KEY","BASE_URL","axios","error","lightbox","SimpleLightbox","createGallery","images","gallery","markup","img","showLoader","loader","hideLoader","showLoadMoreButton","button","hideLoadMoreButton","clearGallery","totalHits","form","loadMoreBtn","event","iziToast","handleFetch","data","card","cardHeight"],"mappings":"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"}